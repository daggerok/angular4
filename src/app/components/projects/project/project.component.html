<!--
  todo:
  re-use common functionality from app.component.styl
  selectors: '.au-transition-container' and '.au-transition-text-item'
-->
<div *ngIf="!removed">
  <a class="list-group-item">
    <h4 class="list-group-item-heading au-list-item">
      <span>{{ project?.name }}</span>

      <span data-placement="top"
            data-toggle="tooltip"
            [popover]="projectPopover"
            [popoverAnimation]="true"
            data-original-title="Remove that project"
            title="remove {{ project?.name }} project"
            class="glyphicon glyphicon-remove pull-right"></span>
    </h4>

    <popover-content #projectPopover
                     title="Are you sure?"
                     placement="left"
                     [animation]="true"
                     [closeOnClickOutside]="true">

      <form (ngSubmit)="onProjectDelete(project); removed = true"
            class="form-group">

        <label for="confirm">Please type project name to confirm</label>

        <div class="input-group">
          <input id="confirm"
                 name="confirm"
                 class="form-control"
                 #confirm="ngModel"
                 [(ngModel)]="confirm.confirm"
                 type="text" required/>

          <span class="input-group-btn">
            <button type="submit"
                    class="btn btn-default"
                    [disabled]="!isProjectName(confirm.value)"
                    [ngClass]="{'btn-danger': isProjectName(confirm.value)}">

              <span *ngIf="isProjectName(confirm.value)">Go!</span>

              <span class="text-muted"
                    *ngIf="!isProjectName(confirm.value)">N/A</span>
            </button>
          </span>
        </div>
      </form>
    </popover-content>
  </a>
</div>
